<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- import CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
</head>
<body>
<div id="app">
    <div style="width: 60%;margin: 10%">
        <el-button type="primary" @click="wang">汪</el-button>
        <el-button type="primary" @click="ou">欧</el-button>
        <el-form ref="form" :model="form" label-width="80px">
            <el-form-item label="token">
                <el-input v-model="form.token"></el-input>
            </el-form-item>
            <el-form-item label="uid">
                <el-input v-model="form.uid"></el-input>
            </el-form-item>
            <el-form-item label="经度">
                <el-input v-model="form.longi"></el-input>
            </el-form-item>
            <el-form-item label="维度">
                <el-input v-model="form.lati"></el-input>
            </el-form-item>
            <el-form-item label="地址">
                <el-input v-model="form.address"></el-input>
            </el-form-item>
            <el-button type="primary" @click="query">查询</el-button>
            <el-button type="primary" @click="daka">打卡</el-button>
            </el-form-item>
        </el-form>
    </div>

</div>
</body>
<!-- import Vue before Element -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script type="text/javascript" src="https://cdn.bootcss.com/qs/6.7.0/qs.min.js"></script>
<script>
    new Vue({
        el: '#app',
        data() {
            return {
                form: {
                    token: '',
                    uid: '',
                    longi: '',
                    lati: '',
                    address: '',
                }
            }
        },
        methods: {
            query() {
                console.log(this.form);
                let that = this
                axios.post('/v1/query',this.form).then(function (response) {
                    let data = JSON.parse(response.data)
                    let code = data.data.qdzt
                    if(code){
                      if(code === '1'){
                          that.$message({
                              showClose: true,
                              message: '未签到',
                              type: 'success'
                          });
                      }else if(code === '6' ){
                          that.$message({
                              showClose: true,
                              message: '上班中，未签退',
                              type: 'success'
                          });
                      }
                      else if(code === '5' ){
                          that.$message({
                              showClose: true,
                              message: '已签退',
                              type: 'success'
                          });
                      }else {
                          that.$message({
                              showClose: true,
                              message: '未知状态',
                              type: 'success'
                          });
                      }
                    }else {
                       alert(JSON.stringify(data) )
                    }
                })
            },
            daka() {
                let that = this
                axios.post('/v1/daka',this.form).then(function (response) {
                    let data = JSON.parse(response.data)
                    if(data.msg ==='成功'){
                        that.$message({
                            showClose: true,
                            message: data.data,
                            type: 'success'
                        });
                    }else {
                        alert(JSON.stringify(data) )
                    }
                })
            },
            ou(){
                this.form.uid = 'o1df8wULVEui8iH6iGQUSxLqEYGM'
            },
            wang(){
                this.form.uid = 'o1df8wbs0jO5O0EVk8IRD47IDZLg'
            }
        }
    })
</script>
</html>